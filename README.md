# ActivityWatch

ActivityWatchは、日々の活動時間を計測し、ラップごとにコメント付きで記録できるシンプルなストップウォッチアプリケーションです。Flutterで開発されています。

## 機能

* **ストップウォッチ**:
    * 計測の開始（リセットして開始）
    * ラップ記録（カウンターは継続）
    * 計測の停止（最後のラップ記録と同時に停止）
* **時間表示**:
    * 経過時間を `時:分:秒:ミリ秒（下2桁）` 形式で表示します。
* **ログ記録**:
    * ラップ記録時に、その時点の経過時間（ラップ終了時間）とコメントを記録します。
    * コメント入力時には、設定可能な候補リストからのサジェスト機能が利用できます（ひらがな入力にも対応）。
    * 記録されたログは、画面下部のテーブルに新しいものから順に表示されます（表示列: END, COMMENT）。
* **ログ編集**:
    * 記録済みのログのコメントを後から編集できます。
* **データ共有**:
    * 記録したログデータをCSV形式のテキストデータとして、OSの共有機能を使って他のアプリに共有できます。
    * CSVデータには、セッション全体の開始日時 (`SESSION`)、各ラップの開始時間 (`START`)、終了時間 (`END`)、コメント (`COMMENT`) が含まれます。
* **サジェスト設定**:
    * コメント入力時のサジェスト候補を、設定画面で自由に追加・編集・削除できます。
    * 設定したサジェスト候補は、アプリ内に永続的に保存されます (`shared_preferences` を使用)。

## 主な画面構成要素

* **カウンター**: 現在の経過時間を `HH:MM:SS:ms` 形式で表示します。
* **アクションボタン (画面上部右)**:
    * **共有ボタン ( `<binary data, 1 bytes><binary data, 1 bytes><binary data, 1 bytes>` )**: ログデータをCSV形式で共有します。
    * **設定ボタン (⚙️)**: サジェスト候補を編集する設定画面に遷移します。
* **ログテーブル**: 記録されたラップログを `END`, `COMMENT` の列で表示します。各行には編集ボタン (✎) があります。
* **フローティングアクションボタン (画面右下)**:
    * **開始ボタン (▶)**: カウンターとログをリセットし、新しい計測を開始します。
    * **ラップ記録ボタン (🚩)**: カウンターを継続したまま、現在の時間でログ記録ダイアログを表示します。

## ログ記録ダイアログ

* **LOGGING TIME**: ラップ記録ボタンを押した時点の時間が表示されます。
* **COMMENT**: 活動内容のメモを入力します（サジェスト機能付き）。
* **終了して記録ボタン (停止アイコン)**: コメントを記録し、カウンターを停止します。
* **保存して記録を続けるボタン (鉛筆アイコン)**: コメントを記録し、カウンターは継続します。
* **ダイアログ外タップ**: 何も記録せずにダイアログを閉じ、カウンターは継続します。

## 技術スタック

* **フレームワーク**: Flutter
* **言語**: Dart
* **主な使用プラグイン**:
    * `share_plus`: OSの共有機能を利用するため。
    * `shared_preferences`: サジェストリストの永続化のため。

## セットアップと実行

1.  Flutter開発環境がセットアップされていることを確認してください。
2.  このリポジトリをクローンします。
    ```bash
    git clone <repository-url>
    cd activity_watch
    ```
3.  必要なパッケージをインストールします。
    ```bash
    flutter pub get
    ```
4.  接続されているデバイス（エミュレータまたは実機）でアプリケーションを実行します。
    ```bash
    flutter run
    ```

## 今後の拡張予定（例）

* ログデータの永続化（`shared_preferences` やデータベース）。
* ログデータのフィルタリングや検索機能。
* テーマ設定（ダークモードなど）。
* Googleカレンダー連携（URLスキームやAPI利用）。
* 活動時間の可視化（グラフ表示など）。